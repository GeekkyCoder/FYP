import{r,ao as J}from"./index-d1c7a555.js";var A={exports:{}},g={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D;function ee(){if(D)return g;D=1;var o=J,b=Symbol.for("react.element"),N=Symbol.for("react.fragment"),C=Object.prototype.hasOwnProperty,S=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L={key:!0,ref:!0,__self:!0,__source:!0};function p(i,s,d){var n,c={},x=null,v=null;d!==void 0&&(x=""+d),s.key!==void 0&&(x=""+s.key),s.ref!==void 0&&(v=s.ref);for(n in s)C.call(s,n)&&!L.hasOwnProperty(n)&&(c[n]=s[n]);if(i&&i.defaultProps)for(n in s=i.defaultProps,s)c[n]===void 0&&(c[n]=s[n]);return{$$typeof:b,type:i,key:x,ref:v,props:c,_owner:S.current}}return g.Fragment=N,g.jsx=p,g.jsxs=p,g}A.exports=ee();var e=A.exports;const T="ml-2 text-md outline-none py-1 px-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700",ae=({file:o,onSaveImage:b,allowColorEditing:N=!0,allowFlip:C=!0,allowRotate:S=!0,allowZoom:L=!0,downloadOnSave:p,open:i,onClose:s})=>{const d=r.useRef(null),[n,c]=r.useState(""),[x,v]=r.useState(""),[f,I]=r.useState(100),[j,M]=r.useState(100),[w,_]=r.useState(100),[y,O]=r.useState(0),[u,B]=r.useState(0),[R,F]=r.useState(!1),[E,$]=r.useState(!1),[m,z]=r.useState(1);r.useEffect(()=>{if(o){const t=URL.createObjectURL(o);return c(t),v(o.name),()=>{URL.revokeObjectURL(t)}}},[o,i]),r.useEffect(()=>{G()},[o,n,u,R,E,m,f,j,w,y]);const G=()=>{const t=d.current,a=t==null?void 0:t.getContext("2d"),l=new Image;l.src=n,l.onload=()=>{if(t&&a){const k=l.width*m,h=l.height*m,X=(l.width-k)/2,q=(l.height-h)/2;if(t.width=l.width,t.height=l.height,a.filter=V(),a.save(),u){const P=t.width/2,W=t.height/2;a.translate(P,W),a.rotate(u*Math.PI/180),a.translate(-P,-W)}R&&(a.translate(t.width,0),a.scale(-1,1)),E&&(a.translate(0,t.height),a.scale(1,-1)),a.translate(X,q),a.scale(m,m),a.drawImage(l,0,0,t.width,t.height),a.restore()}}},V=()=>`brightness(${f}%) contrast(${j}%) grayscale(${y}%) saturate(${w}%)`,H=t=>{var a;B(parseInt((a=t==null?void 0:t.target)==null?void 0:a.value))},Y=()=>{z(t=>t+.1)},Z=()=>{z(t=>Math.max(t-.1,.1))},U=()=>{I(100),M(100),_(100),O(0),B(0),F(!1),$(!1),z(1)},K=()=>{const t=d.current;t&&(t.toBlob(a=>{if(a){const l=new File([a],x,{type:a.type});if(p){const k=URL.createObjectURL(a),h=document.createElement("a");h.download=`${x}`,h.href=k,h.click(),URL.revokeObjectURL(k)}b(l),s&&s()}}),U())},Q=()=>{U(),s&&s()};return e.jsx(e.Fragment,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{"data-testid":"photo-editor-main",className:"photo-editor-main justify-center items-center flex overflow-auto fixed inset-0 z-50",children:e.jsxs("div",{className:"relative rounded-lg shadow-lg w-[40rem] max-sm:w-[22rem] bg-white h-[38rem] dark:bg-slate-800",children:[e.jsxs("div",{className:"flex justify-end p-2 rounded-t",children:[e.jsx("button",{className:T,onClick:Q,children:"Close"}),e.jsx("button",{className:T,onClick:()=>K(),"data-testid":"save-button",children:"Save"})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("canvas",{className:"canvas max-w-lg max-h-[22rem] w-full object-fit mx-auto","data-testid":"image-editor-canvas",id:"canvas",ref:d}),e.jsx("div",{className:"items-center flex m-1 flex-col",children:e.jsxs("div",{className:"flex flex-col bottom-12 gap-1 mt-4 max-sm:w-72 w-11/12 absolute ",children:[S&&e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("label",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"Rotate: "}),e.jsx("input",{type:"range",value:u,step:"1",onChange:H,min:-180,max:180,className:"ml-[1.8rem] w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer range-sm dark:bg-gray-700"}),e.jsx("input",{type:"number",value:u,onChange:H,className:"w-14 pl-1 rounded-md text-right"})]}),N&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-row justify-between items-center","data-testid":"color-editing",children:[e.jsx("label",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"Brightness: "}),e.jsx("input",{id:"default-range",type:"range",step:"1",max:200,value:f,onChange:t=>I(parseInt(t.target.value)),className:"ml-2 w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer range-sm dark:bg-gray-700"}),e.jsx("input",{type:"number",value:f,onChange:t=>I(parseInt(t.target.value)),className:"w-14 pl-1 rounded-md text-right"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"Contrast: "}),e.jsx("input",{id:"default-range",type:"range",step:"1",max:200,value:j,onChange:t=>M(parseInt(t.target.value)),className:"ml-[1.1rem] w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer range-sm dark:bg-gray-700"}),e.jsx("input",{type:"number",value:j,onChange:t=>M(parseInt(t.target.value)),className:"w-14 pl-1 rounded-md text-right"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"Saturate: "}),e.jsx("input",{id:"default-range",type:"range",step:"1",max:200,value:w,onChange:t=>_(parseInt(t.target.value)),className:"ml-[1.2rem] w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer range-sm dark:bg-gray-700"}),e.jsx("input",{type:"number",value:w,onChange:t=>_(parseInt(t.target.value)),className:"w-14 pl-1 rounded-md text-right"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"Grayscale: "}),e.jsx("input",{id:"grayscaleSlider",type:"range",value:y,max:"100",onChange:t=>O(parseInt(t.target.value)),className:"ml-[0.8rem] w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer range-sm dark:bg-gray-700"}),e.jsx("input",{type:"number",value:y,onChange:t=>O(parseInt(t.target.value)),className:"w-14 pl-1 rounded-md text-right"})]})]})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"mb-1 absolute bottom-0 mt-2",children:[e.jsx("button",{className:"mx-1  focus:ring-4 rounded-md p-1",onClick:U,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-rotate-ccw dark:stroke-slate-200",children:[e.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"})]})}),C&&e.jsxs("div",{className:"inline-block","data-testid":"flip-btns",children:[e.jsx("button",{className:"mx-1 focus:ring-4 rounded-md p-1",onClick:()=>F(!R),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-flip-horizontal dark:stroke-slate-200",children:[e.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3"}),e.jsx("path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3"}),e.jsx("path",{d:"M12 20v2"}),e.jsx("path",{d:"M12 14v2"}),e.jsx("path",{d:"M12 8v2"}),e.jsx("path",{d:"M12 2v2"})]})}),e.jsx("button",{className:"mx-1 focus:ring-4 rounded-md p-1",onClick:()=>$(!E),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-flip-vertical dark:stroke-slate-200",children:[e.jsx("path",{d:"M21 8V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3"}),e.jsx("path",{d:"M21 16v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3"}),e.jsx("path",{d:"M4 12H2"}),e.jsx("path",{d:"M10 12H8"}),e.jsx("path",{d:"M16 12h-2"}),e.jsx("path",{d:"M22 12h-2"})]})})]}),L&&e.jsxs("div",{className:"inline-block","data-testid":"zoom-btns",children:[e.jsx("button",{"data-testid":"zoom-in",className:"mx-1 focus:ring-4 rounded-md p-1",onClick:Y,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-zoom-in dark:stroke-slate-200",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}),e.jsx("line",{x1:"11",x2:"11",y1:"8",y2:"14"}),e.jsx("line",{x1:"8",x2:"14",y1:"11",y2:"11"})]})}),e.jsx("button",{"data-testid":"zoom-out",className:"mx-1 focus:ring-4 rounded-md p-1",onClick:Z,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-zoom-out dark:stroke-slate-200",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65"}),e.jsx("line",{x1:"8",x2:"14",y1:"11",y2:"11"})]})})]})]})})]})})]})}),e.jsx("div",{className:"opacity-75 fixed inset-0 z-40 bg-black"})]})})};export{ae as ReactPhotoEditor};
