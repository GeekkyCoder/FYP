import{k as b,j as e,F as q,G as j,p as f,m as u,P as r,r as m,H as A,I as k,J as v,E as L,K as P,N as g,W as M}from"./index-d1c7a555.js";import{f as _,G as d}from"./format-number-a0a64e78.js";import{T as C,a as E,b as I,c as y,d as i,e as K}from"./TableRow-e854280a.js";import{C as O}from"./Container-24a9a04e.js";const S=b(e.jsx("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown"),U=b(e.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");function x({title:t,total:n,icon:a,color:c="primary",sx:o,...s}){return e.jsxs(q,{component:j,spacing:3,direction:"row",sx:{px:3,py:5,borderRadius:2,...o},...s,children:[a&&e.jsx(f,{sx:{width:64,height:64},children:a}),e.jsxs(j,{spacing:.5,children:[e.jsx(u,{variant:"h4",children:_(n)}),e.jsx(u,{variant:"subtitle2",sx:{color:"text.disabled"},children:t})]})]})}x.propTypes={color:r.string,icon:r.oneOfType([r.element,r.string]),sx:r.object,title:r.string,total:r.number};function R(t){const{row:n}=t,[a,c]=m.useState(!1);return e.jsx(m.Fragment,{children:e.jsxs(y,{sx:{"& > *":{borderBottom:"unset"}},children:[e.jsx(i,{children:e.jsx(k,{"aria-label":"expand row",size:"small",onClick:()=>c(!a),children:a?e.jsx(U,{}):e.jsx(S,{})})}),e.jsx(i,{component:"th",children:n.name}),e.jsx(i,{children:n.phone}),e.jsx(i,{children:n.status.toString()}),e.jsx(i,{children:n.date}),e.jsx(i,{children:e.jsx(v,{to:`${n.link}`,sx:{":hover":{cursor:"pointer",color:"blue"}},children:"View Post"})})]})})}R.propTypes={row:r.shape({calories:r.number.isRequired,carbs:r.number.isRequired,fat:r.number.isRequired,history:r.arrayOf(r.shape({amount:r.number.isRequired,customerId:r.string.isRequired,date:r.string.isRequired})).isRequired,name:r.string.isRequired,price:r.number.isRequired,protein:r.number.isRequired}).isRequired};function B(){const[t,n]=m.useState([]);return m.useEffect(()=>{(async()=>{try{const o=(await L().getRequest("phone/getallphones")).phones.map(s=>{var l;return{name:(l=s==null?void 0:s.owner)==null?void 0:l.name,date:s==null?void 0:s.dateRegistered,status:s==null?void 0:s.verified,phone:s==null?void 0:s.model,link:`post/${s==null?void 0:s._id}?name=${s==null?void 0:s.model}`,history:[{date:"2020-01-05",customerId:"11091700",amount:3},{date:"2020-01-02",customerId:"Anonymous",amount:1}]}});n(o)}catch(c){console.err(c)}})()},[]),e.jsx(C,{component:A,children:e.jsxs(E,{"aria-label":"collapsible table",children:[e.jsx(I,{children:e.jsxs(y,{children:[e.jsx(i,{}),e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Phone"}),e.jsx(i,{children:"Verified"}),e.jsx(i,{children:"Date"}),e.jsx(i,{children:"Link"})]})}),e.jsx(K,{children:t.map(a=>e.jsx(R,{row:a},a.name))})]})})}function F(){var l,h,p;const{user:t}=P(),{data:n,isLoading:a,error:c}=g("phone/phone-stats","phone-stats"),{data:o,isLoading:s,error:T}=g("user/total-users","totalUsers");return console.log(o),e.jsxs(O,{maxWidth:"xl",children:[e.jsxs(u,{variant:"h4",sx:{mb:5},children:["Hi, Welcome ",t==null?void 0:t.userName]}),e.jsxs(d,{container:!0,spacing:3,children:[e.jsx(d,{xs:12,sm:6,md:3,children:e.jsx(x,{title:"Total Mobiles Stolen",total:(l=n==null?void 0:n.counts)!=null&&l.stolen?(h=n==null?void 0:n.counts)==null?void 0:h.stolen:"0",color:"success",icon:e.jsx("img",{alt:"icon",src:"/assets/icons/glass/ic_glass_bag.png"})})}),e.jsx(d,{xs:12,sm:6,md:3,children:e.jsx(x,{title:"Users Registered",total:o==null?void 0:o.users,color:"info",icon:e.jsx("img",{alt:"icon",src:"/assets/icons/glass/ic_glass_users.png"})})}),e.jsx(d,{xs:12,sm:6,md:3,children:e.jsx(x,{title:"Total Mobile Recovered",total:(p=n==null?void 0:n.counts)==null?void 0:p.recovered,color:"warning",icon:e.jsx("img",{alt:"icon",src:"/assets/icons/glass/ic_glass_buy.png"})})})]}),(t==null?void 0:t.role.includes("admin"))&&e.jsx(f,{sx:{my:"1em",mt:"3em"},children:e.jsx(B,{})})]})}function D(){return e.jsxs(e.Fragment,{children:[e.jsx(M,{children:e.jsx("title",{children:" My Mobile Tracker App "})}),e.jsx(F,{})]})}export{D as default};
