import{k as D,j as t,r as g,c as E,b as we,_ as f,I as B,a as re,g as ie,s as A,T as le,ad as ye,ab as ce,u as de,O as q,ae as Se,d as $,af as Te,i as ue,$ as Ie,X as pe,H as Le,m as z,P as c,x as Re,M as Ce,G as he,a7 as ke,a8 as H,ag as Me,ah as Ae,E as ge,p as Ne,ai as Be,ac as $e,aj as Fe,F as Ue,ak as _e,W as ze}from"./index-d1c7a555.js";import{d as v,c as K,b as De,T as He,a as Ke,e as Oe}from"./TableRow-e854280a.js";import{C as be,L as Ee}from"./label-55501df2.js";import{C as qe}from"./Container-24a9a04e.js";const W=D(t.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),V=D(t.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),G=D(t.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),X=D(t.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");var Y,J,Q,Z,ee,te,ne,se;const We=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"],Ve=g.forwardRef(function(n,a){const{backIconButtonProps:r,count:o,getItemAriaLabel:i,nextIconButtonProps:p,onPageChange:b,page:s,rowsPerPage:l,showFirstButton:w,showLastButton:y}=n,j=E(n,We),S=we(),R=h=>{b(h,0)},N=h=>{b(h,s-1)},T=h=>{b(h,s+1)},I=h=>{b(h,Math.max(0,Math.ceil(o/l)-1))};return t.jsxs("div",f({ref:a},j,{children:[w&&t.jsx(B,{onClick:R,disabled:s===0,"aria-label":i("first",s),title:i("first",s),children:S.direction==="rtl"?Y||(Y=t.jsx(V,{})):J||(J=t.jsx(W,{}))}),t.jsx(B,f({onClick:N,disabled:s===0,color:"inherit","aria-label":i("previous",s),title:i("previous",s)},r,{children:S.direction==="rtl"?Q||(Q=t.jsx(X,{})):Z||(Z=t.jsx(G,{}))})),t.jsx(B,f({onClick:T,disabled:o!==-1?s>=Math.ceil(o/l)-1:!1,color:"inherit","aria-label":i("next",s),title:i("next",s)},p,{children:S.direction==="rtl"?ee||(ee=t.jsx(G,{})):te||(te=t.jsx(X,{}))})),y&&t.jsx(B,{onClick:I,disabled:s>=Math.ceil(o/l)-1,"aria-label":i("last",s),title:i("last",s),children:S.direction==="rtl"?ne||(ne=t.jsx(W,{})):se||(se=t.jsx(V,{}))})]}))}),Ge=Ve;function Xe(e){return ie("MuiTablePagination",e)}const Ye=re("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),_=Ye;var ae;const Je=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],Qe=A(v,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,n)=>n.root})(({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}})),Ze=A(le,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,n)=>f({[`& .${_.actions}`]:n.actions},n.toolbar)})(({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${_.actions}`]:{flexShrink:0,marginLeft:20}})),et=A("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,n)=>n.spacer})({flex:"1 1 100%"}),tt=A("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,n)=>n.selectLabel})(({theme:e})=>f({},e.typography.body2,{flexShrink:0})),nt=A(ye,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,n)=>f({[`& .${_.selectIcon}`]:n.selectIcon,[`& .${_.select}`]:n.select},n.input,n.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${_.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),st=A(ce,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,n)=>n.menuItem})({}),at=A("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,n)=>n.displayedRows})(({theme:e})=>f({},e.typography.body2,{flexShrink:0}));function ot({from:e,to:n,count:a}){return`${e}–${n} of ${a!==-1?a:`more than ${n}`}`}function rt(e){return`Go to ${e} page`}const it=e=>{const{classes:n}=e;return ue({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},Xe,n)},lt=g.forwardRef(function(n,a){const r=de({props:n,name:"MuiTablePagination"}),{ActionsComponent:o=Ge,backIconButtonProps:i,className:p,colSpan:b,component:s=v,count:l,getItemAriaLabel:w=rt,labelDisplayedRows:y=ot,labelRowsPerPage:j="Rows per page:",nextIconButtonProps:S,onPageChange:R,onRowsPerPageChange:N,page:T,rowsPerPage:I,rowsPerPageOptions:h=[10,25,50,100],SelectProps:P={},showFirstButton:F=!1,showLastButton:U=!1}=r,L=E(r,Je),k=r,x=it(k),d=P.native?"option":st;let u;(s===v||s==="td")&&(u=b||1e3);const C=q(P.id),m=q(P.labelId),ve=()=>l===-1?(T+1)*I:I===-1?l:Math.min(l,(T+1)*I);return t.jsx(Qe,f({colSpan:u,ref:a,as:s,ownerState:k,className:$(x.root,p)},L,{children:t.jsxs(Ze,{className:x.toolbar,children:[t.jsx(et,{className:x.spacer}),h.length>1&&t.jsx(tt,{className:x.selectLabel,id:m,children:j}),h.length>1&&t.jsx(nt,f({variant:"standard"},!P.variant&&{input:ae||(ae=t.jsx(Se,{}))},{value:I,onChange:N,id:C,labelId:m},P,{classes:f({},P.classes,{root:$(x.input,x.selectRoot,(P.classes||{}).root),select:$(x.select,(P.classes||{}).select),icon:$(x.selectIcon,(P.classes||{}).icon)}),children:h.map(M=>g.createElement(d,f({},!Te(d)&&{ownerState:k},{className:x.menuItem,key:M.label?M.label:M,value:M.value?M.value:M}),M.label?M.label:M))})),t.jsx(at,{className:x.displayedRows,children:y({from:l===0?0:T*I+1,to:ve(),count:l===-1?-1:l,page:T})}),t.jsx(o,{className:x.actions,backIconButtonProps:i,count:l,nextIconButtonProps:S,onPageChange:R,page:T,rowsPerPage:I,showFirstButton:F,showLastButton:U,getItemAriaLabel:w})]})}))}),ct=lt,dt=D(t.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function ut(e){return ie("MuiTableSortLabel",e)}const pt=re("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),O=pt,ht=["active","children","className","direction","hideSortIcon","IconComponent"],gt=e=>{const{classes:n,direction:a,active:r}=e,o={root:["root",r&&"active"],icon:["icon",`iconDirection${pe(a)}`]};return ue(o,ut,n)},bt=A(Ie,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,a.active&&n.active]}})(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${O.icon}`]:{opacity:.5}},[`&.${O.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${O.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}})),xt=A("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.icon,n[`iconDirection${pe(a.direction)}`]]}})(({theme:e,ownerState:n})=>f({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none"},n.direction==="desc"&&{transform:"rotate(0deg)"},n.direction==="asc"&&{transform:"rotate(180deg)"})),mt=g.forwardRef(function(n,a){const r=de({props:n,name:"MuiTableSortLabel"}),{active:o=!1,children:i,className:p,direction:b="asc",hideSortIcon:s=!1,IconComponent:l=dt}=r,w=E(r,ht),y=f({},r,{active:o,direction:b,hideSortIcon:s,IconComponent:l}),j=gt(y);return t.jsxs(bt,f({className:$(j.root,p),component:"span",disableRipple:!0,ownerState:y,ref:a},w,{children:[i,s&&!o?null:t.jsx(xt,{as:l,className:$(j.icon),ownerState:y})]}))}),ft=mt;function xe({query:e}){return t.jsx(K,{children:t.jsx(v,{align:"center",colSpan:6,sx:{py:3},children:t.jsxs(Le,{sx:{textAlign:"center"},children:[t.jsx(z,{variant:"h6",paragraph:!0,children:"Not found"}),t.jsxs(z,{variant:"body2",children:["No results found for  ",t.jsxs("strong",{children:['"',e,'"']}),".",t.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}xe.propTypes={query:c.string};function me({selected:e,id:n,name:a,avatarUrl:r,role:o,isVerified:i,status:p,handleClick:b,row:s,setIsUserDeleted:l}){const[w,y]=g.useState(null),[j,S]=g.useState(!1),{alertSeverity:R,handleSnackbarClose:N,snackbarActions:T,snackbarMessage:I,snackbarOpen:h}=Re(),P=L=>{y(L.currentTarget)},F=()=>{y(null)},U=async L=>{S(!0);try{await ge().deleteRequest(`user/delete-user?id=${L}`),l(!0),S(!1),T("account deleted","success",!0)}catch(k){l(!1),S(!1),T(k==null?void 0:k.message,"error",!0)}};return t.jsxs(t.Fragment,{children:[t.jsx(Ce,{alertSeverity:R,handleSnackbarClose:N,snackbarMessage:I,snackbarOpen:h,origin:{horizontal:"center",vertical:"bottom"}}),t.jsxs(K,{hover:!0,tabIndex:-1,role:"checkbox",selected:e,children:[t.jsx(v,{padding:"checkbox",children:t.jsx(be,{disableRipple:!0,checked:e,onChange:L=>b(L,a)})}),t.jsx(v,{component:"th",scope:"row",padding:"none",children:t.jsxs(he,{direction:"row",alignItems:"center",spacing:2,children:[t.jsx(ke,{alt:a,src:r}),t.jsx(z,{variant:"subtitle2",noWrap:!0,children:a})]})}),t.jsx(v,{children:o}),t.jsx(v,{align:"center",children:i?"Yes":"No"}),t.jsx(v,{children:t.jsx(Ee,{color:p==="banned"&&"error"||"success",children:p})}),t.jsx(v,{align:"right",children:t.jsx(B,{onClick:P,children:t.jsx(H,{icon:"eva:more-vertical-fill"})})})]}),t.jsx(Me,{open:!!w,anchorEl:w,onClose:F,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:t.jsxs(ce,{onClick:()=>U(n),children:[t.jsx(H,{icon:"material-symbols-light:delete-outline",sx:{mr:2,color:"red"}}),j?t.jsx(Ae,{}):"Delete"]})})]})}me.propTypes={avatarUrl:c.any,company:c.any,handleClick:c.func,isVerified:c.any,name:c.any,role:c.any,selected:c.any,status:c.string};const jt={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Pt(e,n,a){return e?Math.max(0,(1+e)*n-a):0}function oe(e,n,a){return e[a]===null?1:n[a]===null||n[a]<e[a]?-1:n[a]>e[a]?1:0}function vt(e,n){return e==="desc"?(a,r)=>oe(a,r,n):(a,r)=>-oe(a,r,n)}function wt({inputData:e,comparator:n,filterName:a}){if(e&&!e.length)return;const r=e.map((o,i)=>[o,i]);return r.sort((o,i)=>{const p=n(o[0],i[0]);return p!==0?p:o[1]-i[1]}),e=r.map(o=>o[0]),a&&(e=e.filter(o=>o.userName.toLowerCase().indexOf(a.toLowerCase())!==-1)),e}function fe({order:e,orderBy:n,rowCount:a,headLabel:r,numSelected:o,onRequestSort:i,onSelectAllClick:p}){const b=s=>l=>{i(l,s)};return t.jsx(De,{children:t.jsxs(K,{children:[t.jsx(v,{padding:"checkbox",children:t.jsx(be,{indeterminate:o>0&&o<a,checked:a>0&&o===a,onChange:p})}),r.map(s=>t.jsx(v,{align:s.align||"left",sortDirection:n===s.id?e:!1,sx:{width:s.width,minWidth:s.minWidth},children:t.jsxs(ft,{hideSortIcon:!0,active:n===s.id,direction:n===s.id?e:"asc",onClick:b(s.id),children:[s.label,n===s.id?t.jsx(Ne,{sx:{...jt},children:e==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))]})})}fe.propTypes={order:c.oneOf(["asc","desc"]),orderBy:c.string,rowCount:c.number,headLabel:c.array,numSelected:c.number,onRequestSort:c.func,onSelectAllClick:c.func};function je({emptyRows:e,height:n}){return e?t.jsx(K,{sx:{...n&&{height:n*e}},children:t.jsx(v,{colSpan:9})}):null}je.propTypes={emptyRows:c.number,height:c.number};function Pe({numSelected:e,filterName:n,onFilterName:a}){return t.jsxs(le,{sx:{height:96,display:"flex",justifyContent:"space-between",p:r=>r.spacing(0,1,0,3),...e>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[e>0?t.jsxs(z,{component:"div",variant:"subtitle1",children:[e," selected"]}):t.jsx(Be,{value:n,onChange:a,placeholder:"Search user...",startAdornment:t.jsx($e,{position:"start",children:t.jsx(H,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})}),e>0&&t.jsx(Fe,{title:"Delete",children:t.jsx(B,{children:t.jsx(H,{icon:"eva:trash-2-fill"})})})]})}Pe.propTypes={numSelected:c.number,filterName:c.string,onFilterName:c.func};function yt(){var x;const[e,n]=g.useState([]),[a,r]=g.useState(!1),[o,i]=g.useState(0),[p,b]=g.useState("asc"),[s,l]=g.useState([]),[w,y]=g.useState("name"),[j,S]=g.useState(""),[R,N]=g.useState(5),T=(d,u)=>{u!==""&&(b(w===u&&p==="asc"?"desc":"asc"),y(u))},I=d=>{var u;if(d.target.checked){const C=(u=e==null?void 0:e.users)==null?void 0:u.map(m=>m.userName);l(C);return}l([])},h=(d,u)=>{const C=s.indexOf(u);let m=[];C===-1?m=m.concat(s,u):C===0?m=m.concat(s.slice(1)):C===s.length-1?m=m.concat(s.slice(0,-1)):C>0&&(m=m.concat(s.slice(0,C),s.slice(C+1))),l(m)},P=(d,u)=>{i(u)},F=d=>{i(0),N(parseInt(d.target.value,10))},U=d=>{i(0),S(d.target.value)},L=wt({inputData:e.length?e:[],comparator:vt(p,w),filterName:j}),k=L&&!L.length&&!!j;return g.useEffect(()=>{(async()=>{try{const u=await ge().getRequest("user/all-users");n(u==null?void 0:u.users)}catch(u){console.log(u)}})()},[a]),console.log(e),t.jsxs(qe,{children:[t.jsx(he,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:t.jsx(z,{variant:"h4",children:"Users"})}),t.jsxs(Ue,{children:[t.jsx(Pe,{numSelected:s.length,filterName:j,onFilterName:U}),t.jsx(_e,{children:t.jsx(He,{sx:{overflow:"unset"},children:t.jsxs(Ke,{sx:{minWidth:800},children:[t.jsx(fe,{order:p,orderBy:w,rowCount:e&&(e==null?void 0:e.length),numSelected:s.length,onRequestSort:T,onSelectAllClick:I,headLabel:[{id:"name",label:"Name"},{id:"role",label:"Role"},{id:"isVerified",label:"Verified",align:"center"},{id:"status",label:"Status"},{id:""}]}),t.jsxs(Oe,{children:[L&&L.slice(o*R,o*R+R).map(d=>t.jsx(me,{id:d._id,name:d.userName,role:d.role,status:"active",avatarUrl:d.profilePicture,isVerified:!0,selected:s.indexOf(d.userName)!==-1,handleClick:h,row:d,setIsUserDeleted:r},d._id)),t.jsx(je,{height:77,emptyRows:Pt(o,R,e==null?void 0:e.length)}),k&&t.jsx(xe,{query:j})]})]})})}),e&&t.jsx(ct,{page:o,component:"div",count:e&&((x=e==null?void 0:e.users)==null?void 0:x.length),rowsPerPage:R,onPageChange:P,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:F})]})]})}function Rt(){return t.jsxs(t.Fragment,{children:[t.jsx(ze,{children:t.jsx("title",{children:" Phone-Tracker -User "})}),t.jsx(yt,{})]})}export{Rt as default};
